# Highway Hassle

https://open.kattis.com/problems/highwayhassle

Highway hassle uses two variants of a well-known algorithm, dijkstra's shortest path search, with some extra preprocessing and insight to create the full solution. We are given a graph of a manageable size with a small number of stations that allow us to buy fuel at a certain price and mainly serve to obfuscate the edge costs of this graph. Because of the refueling aspect, a basic dijkstra's search does not work. We may need to return to a certain location with more money spent, but also more fuel in the tank. Instead, we will do a preprocessing phase, and reduce the graph down to only the refueling stations and the exit, with each travelable path with no refueling added to the graph. This means that in our new graph, there will be no need to even consider a stop at a high cost refueling station if we can drive past it. This allows to do a modified dijkstras if we follow a few rules. Whenever moving into a station with a higher fuel cost, we will fully fuel our truck, and when moving into a station with a smaller fuel cost, we will buy just enough fuel to reach it. This does not break the optimality of our pathing because any time we might hit a higher cost station and then go on to another lesser cost station and have enough leftover fuel to get there, the first station will have seen that it could reach the third and sent a truck directly. Now we do a dijkstra's search with total money spent as our weight and keeping fuel as an extra parameter for a correct solution. It is also important to note that we need to not screen out trucks with high cost but also fuel left, otherwise we will miss those paths that must pass through a node multiple times in order to avoid buying gas at a high price there.

## Time Complexity
The preprocessing dijkstra's searches are from each fueling station, and traverse the whole graph, for a cost of 120 \* 10000 \* log(1000) ~= 18m operations. The actual pathing djikstras time complexity is difficult to compute, as nodes can be revisited, but if we say each node can only be revisited once per each other node (it's never advantageous to fully refuel at a location twice) then we have a complexity of (120 \* 120 edges) \* log(120 \* 120 possible trucks to sort) \* (120 \* 120 * 2 max path edges) ~= 47m operations, and total big O (s^3 \* log(s) + s \* e \* log n)
